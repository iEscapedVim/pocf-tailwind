---
import { Icon } from 'astro-icon/components';
---
<script>
document.addEventListener('astro:page-load', () => {
    const modal = document.getElementById("make-member-form");
    if (modal) {
        const openBtn = document.querySelectorAll(".make-member-button");
        openBtn.forEach(btn => btn.addEventListener("click", (e) => {
            e.stopPropagation();
            modal.style.display = "flex";
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }));
        modal.addEventListener("click", (e) => {
            if (e.target === modal) modal.style.display = "none";
        });
        document.addEventListener("click", (e) => {
            if ((e.target as Element).closest("#make-member-form") === null) modal.style.display = "none";
        });
        document.addEventListener("keydown", (e) => {
            if (e.key === "Escape" && modal.style.display === "flex") modal.style.display = "none";
        });
    } else {
        console.error("Modal element not found");
    }
});
</script>
<section id="make-member-form" style="display: none;" class="flex absolute md:mt-0 top-full left-0 bottom-0 right-0 z-[9999] w-11/12 md:w-3/6 mx-auto flex-col justify-center items-center">
    <div class="bg-primary text-[30px] rounded-t-lg items-center justify-between px-6 text-center w-full font-bold py-4 flex flex-row">
        <h4>Join Our Community</h4>
        <button class="text-[16px] font-bold" onclick="document.getElementById('make-member-form').style.display = 'none'">
            <Icon name="close" class="w-8 text-secondary h-auto" />
        </button>
    </div>
    <div class="w-full px-2 py-8 bg-white rounded-b-lg shadow-lg">
        <form class="w-full flex flex-col gap-4 items-start justify-center px-6" action="post" action="/api/membership" enctype="application/x-www-form-urlencoded" data-astro-reload>
            <h3 class="text-secondary font-bold lora italic">Orgnaization's Information</h3>
            <div class="w-full grid grid-cols-6 gap-4">
                <div class="col-span-6 text-start">
                    <label class="text-gray-800 text-sm lora italic">Organization Name <span class="text-red-600">*</span></label>
                    <input required type="text" name="Organization Name" placeholder="Write Your Organization's Name" class="w-full m-2 p-0 h-9 border-0 focus:border-b border-primary ring-0 ring-primary focus:ring-0 outline-0 outline-primary focus:outline-0 border-b">
                </div>
                <div class="col-span-3 text-start">
                    <label class="text-gray-800 text-sm lora italic">Chairman/President's Name <span class="text-red-600">*</span></label>
                    <input required type="text" name="President's Name" placeholder="President's Name" class="w-full m-2 p-0 h-9 border-0 focus:border-b border-primary ring-0 ring-primary focus:ring-0 outline-0 outline-primary focus:outline-0 border-b">
                </div>
                <div class="col-span-3 text-start">
                    <label class="text-gray-800 text-sm lora italic">President's Number<span class="text-red-600">*</span></label>
                    <input required type="tel" pattern="[0-9]{3}-[0-9]{2}-[0-9]{3}" name="President's Number" placeholder="+92 (123) 4567 890" class="w-full m-2 p-0 h-9 border-0 focus:border-b border-primary ring-0 ring-primary focus:ring-0 outline-0 outline-primary focus:outline-0 border-b">
                </div>
                <div class="col-span-3 text-start">
                    <label class="text-gray-800 text-sm lora italic">CEO/ED/CD's Name <span class="text-red-600">*</span></label>
                    <input required type="text" name="CEO's Name" placeholder="President's Name" class="w-full m-2 p-0 h-9 border-0 focus:border-b border-primary ring-0 ring-primary focus:ring-0 outline-0 outline-primary focus:outline-0 border-b">
                </div>
                <div class="col-span-3 text-start">
                    <label class="text-gray-800 text-sm lora italic">CEO/ED/CD's Number<span class="text-red-600">*</span></label>
                    <input required type="tel" pattern="[0-9]{3}-[0-9]{2}-[0-9]{3}" name="CEO's Number" placeholder="+92 (123) 4567 890" class="w-full m-2 p-0 h-9 border-0 focus:border-b border-primary ring-0 ring-primary focus:ring-0 outline-0 outline-primary focus:outline-0 border-b">
                </div>
                <div class="col-span-6 text-start">
                    <label class="text-gray-800 text-sm lora italic">Orphan Program's Focal Person's Name <span class="text-red-600">*</span></label>
                    <input required type="text" name="Focal Name" placeholder="Focal Person" class="w-full m-2 p-0 h-9 border-0 focus:border-b border-primary ring-0 ring-primary focus:ring-0 outline-0 outline-primary focus:outline-0 border-b">
                </div>
                <div class="col-span-6 text-start">
                    <label class="text-gray-800 text-sm lora italic">Focal Person's Number <span class="text-red-600">*</span></label>
                    <input required type="text" name="Focal Number" placeholder="+92 (123) 4567 890" class="w-full m-2 p-0 h-9 border-0 focus:border-b border-primary ring-0 ring-primary focus:ring-0 outline-0 outline-primary focus:outline-0 border-b">
                </div>
                <div class="col-span-3 text-start">
                    <label class="text-gray-800 text-sm lora italic"> Office Address: <span class="text-red-600">*</span></label>
                    <input required type="text" name="Office Address" placeholder="Office 123-A, Street 12, Sector F-6/2, Islamabad, Pakistan" class="w-full m-2 p-0 h-9 border-0 focus:border-b border-primary ring-0 ring-primary focus:ring-0 outline-0 outline-primary focus:outline-0 border-b">
                </div>
                <div class="col-span-3 text-start">
                    <label class="text-gray-800 text-sm lora italic">Office Number<span class="text-red-600">*</span></label>
                    <input required type="tel" pattern="[0-9]{3}-[0-9]{2}-[0-9]{3}" name="Office Number" placeholder="+92 (123) 4567 890" class="w-full m-2 p-0 h-9 border-0 focus:border-b border-primary ring-0 ring-primary focus:ring-0 outline-0 outline-primary focus:outline-0 border-b">
                </div>
                <div class="col-span-6 text-start">
                    <label class="text-gray-800 text-sm lora italic">Primary Email Address <span class="text-red-600">*</span></label>
                    <input required type="email" name="Email Address" placeholder="name@example.com" class="w-full m-2 p-0 h-9 border-0 focus:border-b border-primary ring-0 ring-primary focus:ring-0 outline-0 outline-primary focus:outline-0 border-b">
                </div>
                <div class="col-span-6 text-start">
                    <label class="text-gray-800 text-sm lora italic">Secondary Email Address</label>
                    <input type="email" name="Email Address" placeholder="name@example.com" class="w-full m-2 p-0 h-9 border-0 focus:border-b border-primary ring-0 ring-primary focus:ring-0 outline-0 outline-primary focus:outline-0 border-b">
                </div>
                <div class="col-span-3 text-start">
                    <label class="text-gray-800 text-sm lora italic">Year of Establishment <span class="text-red-600">*</span></label>
                    <input required type="number" name="Established" placeholder="1978" class="w-full m-2 p-0 h-9 border-0 focus:border-b border-primary ring-0 ring-primary focus:ring-0 outline-0 outline-primary focus:outline-0 border-b">
                </div>
                <div class="col-span-3 text-start">
                    <label class="text-gray-800 text-sm lora italic">Number of Sponsored Orphans <span class="text-red-600">*</span></label>
                    <input required type="number" name="Total Orphans" placeholder="32901" class="w-full m-2 p-0 h-9 border-0 focus:border-b border-primary ring-0 ring-primary focus:ring-0 outline-0 outline-primary focus:outline-0 border-b">
                </div>
                <div class="col-span-6 text-start">
                    <label class="text-gray-800 text-sm lora italic">Operational Districts </label>
                    <input type="text" name="Districts " placeholder="e.g. Karachi, Lahore, Islamabad" class="w-full m-2 p-0 h-9 border-0 focus:border-b border-primary ring-0 ring-primary focus:ring-0 outline-0 outline-primary focus:outline-0 border-b">
                </div>
                <div class="col-span-3 flex items-start">
                    <button type="submit" class="bg-primary hover:bg-secondary text-secondary hover:text-white border-0 focus:border-0 ring-0 focus:ring-0 outline-0 focus:outline-0 py-2 px-5 text-sm lora italic font-bold">Submit</button>
                </div>
            </div>
        </form>
    </div>
</section>

